<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="ie=edge">
<title>MicroShift Basic Usage - MicroShift.io</title>
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel=icon href=https://microshift.io/favicon.png>
<link rel=stylesheet href=/css/style.min.6719d72e323121369d5caeb4264b95d8a63cf1deaab029da67602fe5a046e0a4.css>
<link rel=stylesheet href=/css/admonition.min.d6eb578b3fe0c600dbd09a9bd27c5df86cbb30bbe9c9490df10f3ff46bd49a5b.css>
<link rel=stylesheet href=/css/search.min.b3a567381af326a096422275c22a08b280ce4129812d6644a4f27053e5324303.css>
</head>
<body class="page page-default-single">
<div id=main-menu-mobile class=main-menu-mobile>
<ul>
<li class="menu-item-🏠 home">
<a href=/>
<span>🏠 Home</span>
</a>
</li>
<li class="menu-item-📚 microshift">
<a href=/docs>
<span>📚 MicroShift</span>
</a>
</li>
<li class="menu-item-📚 about">
<a href=/docs/about/about>
<span>📚 About</span>
</a>
</li>
<li class="menu-item-🧭 getting started">
<a href=/docs/getting-started>
<span>🧭 Getting Started</span>
</a>
</li>
<li class="menu-item-⛑️ user documentation">
<a href=/docs/user-documentation/>
<span>⛑️ User Documentation</span>
</a>
</li>
<li class="menu-item-🖥️ developer documentation">
<a href=/docs/developer-documentation>
<span>🖥️ Developer Documentation</span>
</a>
</li>
<li class="menu-item-❤️ community">
<a href=/docs/community/community>
<span>❤️ Community</span>
</a>
</li>
<li class="menu-item-🔍 search">
<a href=/search>
<span>🔍 Search</span>
</a>
</li>
</ul>
</div>
<div class=wrapper>
<div class=header>
<div class=container>
<div class=logo>
<a href=https://microshift.io><img alt=Logo src=/images/logo.svg></a>
</div>
<div class=logo-mobile>
<a href=https://microshift.io><img alt=Logo src=/images/logo-mobile.svg></a>
</div>
<div id=main-menu class=main-menu>
<ul>
<li class="menu-item-🏠 home">
<a href=/>
<span>🏠 Home</span>
</a>
</li>
<li class="menu-item-📚 microshift">
<a href=/docs>
<span>📚 MicroShift</span>
</a>
</li>
<li class="menu-item-📚 about">
<a href=/docs/about/about>
<span>📚 About</span>
</a>
</li>
<li class="menu-item-🧭 getting started">
<a href=/docs/getting-started>
<span>🧭 Getting Started</span>
</a>
</li>
<li class="menu-item-⛑️ user documentation">
<a href=/docs/user-documentation/>
<span>⛑️ User Documentation</span>
</a>
</li>
<li class="menu-item-🖥️ developer documentation">
<a href=/docs/developer-documentation>
<span>🖥️ Developer Documentation</span>
</a>
</li>
<li class="menu-item-❤️ community">
<a href=/docs/community/community>
<span>❤️ Community</span>
</a>
</li>
<li class="menu-item-🔍 search">
<a href=/search>
<span>🔍 Search</span>
</a>
</li>
</ul>
</div>
<button id=toggle-main-menu-mobile class="hamburger hamburger--slider" type=button>
<span class=hamburger-box>
<span class=hamburger-inner></span>
</span>
</button>
</div>
</div>
<div class="container pt-2 pt-md-6 pb-3 pb-md-6">
<div class=row>
<div class="col-12 col-md-3 mb-3">
<div class=sidebar>
<aside>
<ul>
<li>
<a href=/>
<span>🏠 Home</span>
</a>
</li>
<li>
<a href=/docs>
<span>📚 MicroShift</span>
</a>
</li>
<li>
<a href=/docs/about/about>
<span>📚 About</span>
</a>
</li>
<li>
<a href=/docs/getting-started>
<span>🧭 Getting Started</span>
</a>
</li>
<li>
<a href=/docs/user-documentation/>
<span>⛑️ User Documentation</span>
</a>
</li>
<li>
<a href=/docs/developer-documentation>
<span>🖥️ Developer Documentation</span>
</a>
</li>
<li>
<a href=/docs/community/community>
<span>❤️ Community</span>
</a>
</li>
<li>
<a href=/search>
<span>🔍 Search</span>
</a>
</li>
</ul>
</aside>
</div>
</div>
<div class="col-12 col-md-9">
<h1 class=title>MicroShift Basic Usage</h1>
<div class=content>
<p>All of the standard Kubernetes management tools can be used to maintain and modify your MicroShift applications. Below we will show some examples using kubectl, kustomize, and helm to deploy and maintain applications.</p>
<h2 id=example-applications>Example Applications</h2>
<h3 id=metal-lb>Metal LB</h3>
<p>Metal LB is a load balancer that can be used to route traffic to a number of backends.</p>
<p>Creating the Metal LB namespace and deployment.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.11.0/manifests/namespace.yaml
kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.11.0/manifests/metallb.yaml
</code></pre></div><p>Once the components are available, a <code>ConfigMap</code> is required to define the address pool for the load balancer to use.</p>
<p>Create the Metal<code> LB Confi</code>gMap:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=l>kubectl create -f - &lt;&lt;EOF</span><span class=w>
</span><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>ConfigMap</span><span class=w>
</span><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>metallb-system</span><span class=w>
</span><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>config</span><span class=w>
</span><span class=w></span><span class=nt>data</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>config</span><span class=p>:</span><span class=w> </span><span class=p>|</span><span class=sd>
</span><span class=sd>    address-pools:
</span><span class=sd>    - name: default
</span><span class=sd>      protocol: layer2
</span><span class=sd>      addresses:
</span><span class=sd>      - 192.168.1.240-192.168.1.250</span><span class=w>    
</span><span class=w></span><span class=l>EOF</span><span class=w>
</span></code></pre></div><p>Now we are able to deploy a test application to verify thing are working as expected.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>kubectl create ns <span class=nb>test</span>
kubectl create deployment nginx -n <span class=nb>test</span> --image nginx
</code></pre></div><p>Create a service:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=l>kubectl create -f - &lt;&lt;EOF</span><span class=w>
</span><span class=w></span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=l>v1</span><span class=w>
</span><span class=w></span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=l>Service</span><span class=w>
</span><span class=w></span><span class=nt>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class=l>test</span><span class=w>
</span><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>metallb.universe.tf/address-pool</span><span class=p>:</span><span class=w> </span><span class=l>default</span><span class=w>
</span><span class=w></span><span class=nt>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span><span class=w>  </span>- <span class=nt>port</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span><span class=w>    </span><span class=nt>targetPort</span><span class=p>:</span><span class=w> </span><span class=m>80</span><span class=w>
</span><span class=w>  </span><span class=nt>selector</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class=l>nginx</span><span class=w>
</span><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class=l>LoadBalancer</span><span class=w>
</span><span class=w></span><span class=l>EOF</span><span class=w>
</span></code></pre></div><p>Verify the service exists and that an IP address has been assigned.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>kubectl get svc -n <span class=nb>test</span>
NAME    TYPE           CLUSTER-IP      EXTERNAL-IP     PORT<span class=o>(</span>S<span class=o>)</span>        AGE
nginx   LoadBalancer   10.43.183.104   192.168.1.241   80:32434/TCP   29m
</code></pre></div><p>Using your browser you can now access the NGINX application by the <code>EXTERNAL-IP</code> provided by the service.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<center>
<a class=github-button href=https://github.com/redhat-et/microshift data-icon=octicon-cloud-download aria-label="redhat-et/microshift on GitHub">MicroShift</a>
<a class=github-button href=https://github.com/redhat-et/microshift data-icon=octicon-star aria-label="Star redhat-et/microshift on GitHub">Star</a>
<a class=github-button href=https://github.com/redhat-et/microshift/fork data-icon=octicon-repo-forked aria-label="Fork redhat-et/microshift on GitHub">Fork</a>
<a class=github-button href=https://github.com/redhat-et/microshift/issues data-icon=octicon-issue-opened aria-label="Issue redhat-et/microshift on GitHub">Issue</a>
<p>Built with <a href=https://github.com/zerostaticthemes/hugo-whisper-theme>whisper-theme</a> from <a href=http://gohugo.io/>Hugo</a></p>
</center>
<script async defer src=https://buttons.github.io/buttons.js></script>
<script type=text/javascript src=/js/scripts.min.eaf147370baecdd07c022597db631f99cab1c9cd6479de586f30327a568d6a0f.js></script>
</body>
</html>