<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="ie=edge">
<title>Experimental Development - MicroShift.io</title>
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel=icon href=https://microshift.io/favicon.png>
<link rel=stylesheet href=/css/style.min.6719d72e323121369d5caeb4264b95d8a63cf1deaab029da67602fe5a046e0a4.css>
<link rel=stylesheet href=/css/admonition.min.d6eb578b3fe0c600dbd09a9bd27c5df86cbb30bbe9c9490df10f3ff46bd49a5b.css>
<link rel=stylesheet href=/css/search.min.b3a567381af326a096422275c22a08b280ce4129812d6644a4f27053e5324303.css>
</head>
<body class="page page-default-single">
<div id=main-menu-mobile class=main-menu-mobile>
<ul>
<li class="menu-item-üè† home">
<a href=/>
<span>üè† Home</span>
</a>
</li>
<li class="menu-item-üìö microshift">
<a href=/docs>
<span>üìö MicroShift</span>
</a>
</li>
<li class="menu-item-üìö about">
<a href=/docs/about/about>
<span>üìö About</span>
</a>
</li>
<li class="menu-item-üß≠ getting started">
<a href=/docs/getting-started>
<span>üß≠ Getting Started</span>
</a>
</li>
<li class="menu-item-‚õëÔ∏è user documentation">
<a href=/docs/user-documentation/>
<span>‚õëÔ∏è User Documentation</span>
</a>
</li>
<li class="menu-item-üñ•Ô∏è developer documentation">
<a href=/docs/developer-documentation>
<span>üñ•Ô∏è Developer Documentation</span>
</a>
</li>
<li class="menu-item-‚ù§Ô∏è community">
<a href=/docs/community/community>
<span>‚ù§Ô∏è Community</span>
</a>
</li>
<li class="menu-item-üîç search">
<a href=/search>
<span>üîç Search</span>
</a>
</li>
</ul>
</div>
<div class=wrapper>
<div class=header>
<div class=container>
<div class=logo>
<a href=https://microshift.io><img alt=Logo src=/images/logo.svg></a>
</div>
<div class=logo-mobile>
<a href=https://microshift.io><img alt=Logo src=/images/logo-mobile.svg></a>
</div>
<div id=main-menu class=main-menu>
<ul>
<li class="menu-item-üè† home">
<a href=/>
<span>üè† Home</span>
</a>
</li>
<li class="menu-item-üìö microshift">
<a href=/docs>
<span>üìö MicroShift</span>
</a>
</li>
<li class="menu-item-üìö about">
<a href=/docs/about/about>
<span>üìö About</span>
</a>
</li>
<li class="menu-item-üß≠ getting started">
<a href=/docs/getting-started>
<span>üß≠ Getting Started</span>
</a>
</li>
<li class="menu-item-‚õëÔ∏è user documentation">
<a href=/docs/user-documentation/>
<span>‚õëÔ∏è User Documentation</span>
</a>
</li>
<li class="menu-item-üñ•Ô∏è developer documentation">
<a href=/docs/developer-documentation>
<span>üñ•Ô∏è Developer Documentation</span>
</a>
</li>
<li class="menu-item-‚ù§Ô∏è community">
<a href=/docs/community/community>
<span>‚ù§Ô∏è Community</span>
</a>
</li>
<li class="menu-item-üîç search">
<a href=/search>
<span>üîç Search</span>
</a>
</li>
</ul>
</div>
<button id=toggle-main-menu-mobile class="hamburger hamburger--slider" type=button>
<span class=hamburger-box>
<span class=hamburger-inner></span>
</span>
</button>
</div>
</div>
<div class="container pt-2 pt-md-6 pb-3 pb-md-6">
<div class=row>
<div class="col-12 col-md-3 mb-3">
<div class=sidebar>
<aside>
<ul>
<li>
<a href=/>
<span>üè† Home</span>
</a>
</li>
<li>
<a href=/docs>
<span>üìö MicroShift</span>
</a>
</li>
<li>
<a href=/docs/about/about>
<span>üìö About</span>
</a>
</li>
<li>
<a href=/docs/getting-started>
<span>üß≠ Getting Started</span>
</a>
</li>
<li>
<a href=/docs/user-documentation/>
<span>‚õëÔ∏è User Documentation</span>
</a>
</li>
<li>
<a href=/docs/developer-documentation>
<span>üñ•Ô∏è Developer Documentation</span>
</a>
</li>
<li>
<a href=/docs/community/community>
<span>‚ù§Ô∏è Community</span>
</a>
</li>
<li>
<a href=/search>
<span>üîç Search</span>
</a>
</li>
</ul>
</aside>
</div>
</div>
<div class="col-12 col-md-9">
<h1 class=title>Experimental Development</h1>
<div class=content>
<h2 id=osx>OSX</h2>
<p>WIP: More Content Coming Soon</p>
<h2 id=windows>Windows</h2>
<p>WIP: More Content Coming Soon</p>
<h2 id=microshift-all-in-one-image>MicroShift All-In-One Image</h2>
<p>MicroShift All-In-One includes everything required to run MicroShift in a single container image.
This deployment mode is recommended for development and testing only.</p>
<h3 id=run-microshift-all-in-one-as-a-systemd-service>Run MicroShift All-In-One as a Systemd Service</h3>
<p>Copy <code>microshift-aio.service</code> unit file to <code>/etc/systemd</code> and the <code>microshift-aio</code> run script to <code>/usr/bin</code></p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>curl -o /etc/systemd/system/microshift-aio.service https://raw.githubusercontent.com/redhat-et/microshift/main/packaging/systemd/microshift-aio.service
curl -o /usr/bin/microshift-aio https://raw.githubusercontent.com/redhat-et/microshift/main/packaging/systemd/microshift-aio
</code></pre></div><p>Now enable and start the service. The <code>KUBECONFIG</code> location will be written to <code>/etc/microshift-aio/microshift-aio.conf</code>.
If the <code>microshift-data</code> podman volume does not exist, the systemd service will create one.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>systemctl <span class=nb>enable</span> microshift-aio --now
<span class=nb>source</span> /etc/microshift-aio/microshift-aio.conf
</code></pre></div><p>Verify that MicroShift is running.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>kubectl get pods -A
</code></pre></div><p>Stop <code>microshift-aio</code> service</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>systemctl stop microshift-aio
</code></pre></div><div class="admonition note">
<p class=admonition-title>Note</p>
<p class=admonition>Stopping <code>microshift-aio</code> service <em>does not</em> remove the Podman volume <code>microshift-data</code>. A restart will use the same volume.</p>
</div>
<h3 id=run-microshift-all-in-one-image-without-systemd>Run MicroShift All-In-One Image Without Systemd</h3>
<p>First, enable the following SELinux rule:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>setsebool -P container_manage_cgroup <span class=nb>true</span>
</code></pre></div><p>Next, create a container volume:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sudo podman volume create microshift-data
</code></pre></div><p>The following example binds localhost the container volume to <code>/var/lib</code></p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sudo podman run -d --rm --name microshift-aio --privileged -v /lib/modules:/lib/modules -v microshift-data:/var/lib  -p 6443:6443 microshift-aio
</code></pre></div><p>You can access the cluster either on the host or inside the container</p>
<h3 id=access-the-cluster-inside-the-container>Access the Cluster Inside the Container</h3>
<p>Execute the following command to get into the container:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>sudo podman <span class=nb>exec</span> -ti microshift-aio bash
</code></pre></div><p>Inside the container, install <code>kubectl</code>:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=nb>export</span> <span class=nv>ARCH</span><span class=o>=</span><span class=k>$(</span>uname -m <span class=p>|</span>sed -e <span class=s2>&#34;s/x86_64/amd64/&#34;</span> <span class=p>|</span>sed -e <span class=s2>&#34;s/aarch64/arm64/&#34;</span><span class=k>)</span>
curl -LO <span class=s2>&#34;https://storage.googleapis.com/kubernetes-release/release/</span><span class=k>$(</span>curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt<span class=k>)</span><span class=s2>/bin/linux/</span><span class=si>${</span><span class=nv>ARCH</span><span class=si>}</span><span class=s2>/kubectl&#34;</span> <span class=o>&amp;&amp;</span> <span class=se>\
</span><span class=se></span>chmod +x ./kubectl <span class=o>&amp;&amp;</span> <span class=se>\
</span><span class=se></span>mv ./kubectl /usr/local/bin/kubectl
</code></pre></div><p>Inside the container, run the following to see the pods:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=nb>export</span> <span class=nv>KUBECONFIG</span><span class=o>=</span>/var/lib/microshift/resources/kubeadmin/kubeconfig
kubectl get pods -A
</code></pre></div><h3 id=access-the-cluster-from-the-host>Access the Cluster From the Host</h3>
<h4 id=linux>Linux</h4>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=nb>export</span> <span class=nv>KUBECONFIG</span><span class=o>=</span><span class=k>$(</span>podman volume inspect microshift-data --format <span class=s2>&#34;{{.Mountpoint}}&#34;</span><span class=k>)</span>/microshift/resources/kubeadmin/kubeconfig
kubectl get pods -A -w
</code></pre></div><h4 id=macos>MacOS</h4>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>docker cp microshift-aio:/var/lib/microshift/resources/kubeadmin/kubeconfig ./kubeconfig
kubectl get pods -A -w --kubeconfig ./kubeconfig
</code></pre></div><h4 id=windows-1>Windows</h4>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>docker.exe cp microshift-aio:/var/lib/microshift/resources/kubeadmin/kubeconfig .<span class=se>\k</span>ubeconfig
kubectl.exe get pods -A -w --kubeconfig .<span class=se>\k</span>ubeconfig
</code></pre></div><h2 id=build-all-in-one-container-image>Build All-In-One Container Image</h2>
<h3 id=build-with-locally-built-binary>Build With Locally Built Binary</h3>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>make microshift-aio <span class=nv>FROM_SOURCE</span><span class=o>=</span><span class=s2>&#34;true&#34;</span>
</code></pre></div><h3 id=build-with-latest-released-binary-download>Build With Latest Released Binary Download</h3>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>make microshfit-aio
</code></pre></div><h2 id=quickstart-local-deployment-for-testing-only>QuickStart Local Deployment for Testing Only</h2>
<p>To give MicroShift a try, simply install a recent test version (we don&rsquo;t provide stable releases yet) on a Fedora-derived Linux distribution (we&rsquo;ve only tested Fedora, RHEL, and CentOS Stream so far) using:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>curl -sfL https://raw.githubusercontent.com/redhat-et/microshift/main/install.sh <span class=p>|</span> bash
</code></pre></div><p>This will install MicroShift&rsquo;s dependencies (CRI-O) on the host, install a MicroShift systemd service and start it.</p>
<p>For convenience, the script will also add a new &ldquo;<code>microshift</code>&rdquo; context to your <code>$HOME/.kube/config</code>, so you&rsquo;ll be able to access your cluster using, e.g.:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>kubectl get all -A --context microshift
</code></pre></div><p>or</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>kubectl config use-context microshift
kubectl get all -A
</code></pre></div><div class="admonition warning">
<p class=admonition-title>Warning</p>
<p class=admonition>When installing MicroShift on a system with an older version already installed, it is safest to remove the old data directory and start fresh:</p>
</div>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh>rm -rf /var/lib/microshift <span class=o>&amp;&amp;</span> rm -r <span class=nv>$HOME</span>/.microshift
</code></pre></div><h2 id=limitation>Limitation</h2>
<p>These instructions are tested on Linux, Mac, and Windows.
On MacOS, running containerized MicroShift as non-root is not supported on MacOS.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<center>
<a class=github-button href=https://github.com/redhat-et/microshift data-icon=octicon-cloud-download aria-label="redhat-et/microshift on GitHub">MicroShift</a>
<a class=github-button href=https://github.com/redhat-et/microshift data-icon=octicon-star aria-label="Star redhat-et/microshift on GitHub">Star</a>
<a class=github-button href=https://github.com/redhat-et/microshift/fork data-icon=octicon-repo-forked aria-label="Fork redhat-et/microshift on GitHub">Fork</a>
<a class=github-button href=https://github.com/redhat-et/microshift/issues data-icon=octicon-issue-opened aria-label="Issue redhat-et/microshift on GitHub">Issue</a>
<p>Built with <a href=https://github.com/zerostaticthemes/hugo-whisper-theme>whisper-theme</a> from <a href=http://gohugo.io/>Hugo</a></p>
</center>
<script async defer src=https://buttons.github.io/buttons.js></script>
<script type=text/javascript src=/js/scripts.min.eaf147370baecdd07c022597db631f99cab1c9cd6479de586f30327a568d6a0f.js></script>
</body>
</html>